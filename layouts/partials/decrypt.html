<script>
    (function() {
        let obf = atob("INJECT_KEY_HERE_BASE64"); // Decode Base64 key

        // Securely provide access to the decryption key
        window.getDecryptionKey = function() {
            return obf;
        };

        // Delay key wiping to allow decryption to complete
        setTimeout(() => {
            console.warn("Wiping decryption key...");
            obf = null;
            window.getDecryptionKey = function() { return null; };
        }, 15000); // Wipe after 15 seconds
    })();
</script>

<script>
    // Prevent DevTools users from logging the key
    setInterval(() => {
        if (window.outerWidth - window.innerWidth > 100 || window.outerHeight - window.innerHeight > 100) {
            console.warn("DevTools detected! Wiping decryption key...");
            window.getDecryptionKey = function() { return null; };
            console.log = function() {};
            console.warn = function() {};
            console.error = function() {};
        }
    }, 1000);
</script>

<script>
    function waitForKeyAndDecrypt() {
        let attempts = 0;
        let checkKey = setInterval(() => {
            let decryptionKey = window.getDecryptionKey ? window.getDecryptionKey() : null;

            if (decryptionKey) {
                clearInterval(checkKey); // Stop checking
                decryptAndDisplay(decryptionKey);
            } else {
                attempts++;
                if (attempts > 15) { // Stop checking after 3 seconds
                    clearInterval(checkKey);
                    console.error("Decryption key not available.");
                }
            }
        }, 200);
    }

    function decryptAndDisplay(decryptionKey) {
        const encryptedElement = document.getElementById('encrypted-content');
        if (!encryptedElement) {
            console.error("Encrypted content element not found!");
            return;
        }

        const encryptedContent = encryptedElement.textContent.trim();
        if (!decryptionKey) {
            console.error("Decryption key is missing!");
            return;
        }

        const decryptedContent = decryptContent(encryptedContent, decryptionKey);
        console.log("Decrypted Content:", decryptedContent);

        // Display the decrypted content securely
        const hiddenDiv = document.createElement('div');
        hiddenDiv.className = "hidden-content";

        const shadow = hiddenDiv.attachShadow({ mode: 'closed' });

        let lines = decryptedContent.split("\n");
        lines.forEach((line) => {
            let lineDiv = document.createElement("div");
            for (let char of line) {
                let span = document.createElement("span");
                if (/[A-Za-z]/.test(char)) {
                    span.className = "letters-font";
                } else if (/[0-9]/.test(char)) {
                    span.className = "numbers-font";
                } else {
                    span.className = "symbols-font";
                }
                span.textContent = char;
                lineDiv.appendChild(span);
            }
            shadow.appendChild(lineDiv);
        });

        const container = document.querySelector(".wows-container");
        if (container) {
            container.appendChild(hiddenDiv);
        } else {
            console.warn("wows-container not found! Appending to body instead.");
            document.body.appendChild(hiddenDiv);
        }

        encryptedElement.textContent = ""; // Hide original encrypted text

        const style = document.createElement("style");
        style.textContent = `
            .hidden-content {
                white-space: pre-wrap;
                display: block;
                padding: 10px;
                font-size: 18px;
                line-height: 1.5;
            }
            .letters-font {
                font-family: 'ShinedowLetters', Arial, sans-serif;
            }
            .numbers-font {
                font-family: 'OrbitronNumbers', sans-serif;
                font-size: 13px;
            }
            .symbols-font {
                font-family: 'OrbitronSymbols', sans-serif;
                font-size: 13px;
            }
        `;
        shadow.appendChild(style);

        // Disable selection & right-click
        const globalStyle = document.createElement("style");
        globalStyle.textContent = `
            .hidden-content span {
                pointer-events: none;
                user-select: none;
            }
        `;
        document.head.appendChild(globalStyle);

        setInterval(() => {
            if (window.outerWidth - window.innerWidth > 100 || window.outerHeight - window.innerHeight > 100) {
                shadow.innerHTML = "<span>🅽🅸🅲🅴 🆃🆁🆈 🫵🏻</span>";
            }
        }, 1000);
    }

    window.onload = function () {
        waitForKeyAndDecrypt();
    };
</script>